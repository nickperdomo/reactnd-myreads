{"version":3,"sources":["BooksAPI.js","Book.js","BookGrid.js","BookShelf.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","update","book","shelf","fetch","concat","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","then","res","json","search","query","data","books","Book","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","bookData","onMoveShelf","state","newShelf","setState","_this2","authors","length","join","thumbnail","imageLinks","react_default","a","createElement","className","style","width","height","backgroundImage","value","onChange","event","updateShelf","target","disabled","title","Component","BookGrid","_this$props","allBooks","shelfBooks","bookList","map","matchingBook","filter","existingBook","key","src_Book","BookShelf","shelfTitle","src_BookGrid","BooksApp","results","queryError","handleMoveShelf","movedBook","BooksAPI","prevState","updateQuery","trim","booksData","shelfName","_this3","_this$state","currentlyReading","filterByShelf","wantToRead","read","react_router","exact","path","render","src_BookShelf","react_router_dom","to","name","type","placeholder","e","preventDefault","React","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f0d82f80.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React, { Component } from 'react';\n\nclass Book extends Component {\n  constructor(props) {\n    super(props);\n    this.bookData = props.bookData;\n    this.onMoveShelf = props.onMoveShelf;\n    this.state = { shelf: this.bookData.shelf };\n  }\n\n  updateShelf(newShelf) {\n    this.setState(() => ({\n      shelf: newShelf,\n    }))\n    this.onMoveShelf(this.bookData, newShelf)\n  }\n\n\n  render() {\n    const bookData = this.bookData;\n    const authors = bookData.authors && bookData.authors.length > 1\n      ? bookData.authors.join(\", \")\n      : `${bookData.authors}`;\n    const thumbnail = bookData.imageLinks && bookData.imageLinks.thumbnail\n      ? bookData.imageLinks.thumbnail\n      : \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTg4Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojY2VjZWNlO308L3N0eWxlPjwvZGVmcz48dGl0bGU+dGh1bWJuYWlsPC90aXRsZT48cmVjdCBjbGFzcz0iYSIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxODgiLz48L3N2Zz4=\";\n\n    return (\n      <div className=\"book\">\n        <div className=\"book-top\">\n          <div className=\"book-cover\" style={{ width: 128, height: 188, backgroundImage: `url(${thumbnail})` }}></div>\n          <div className=\"book-shelf-changer\">\n            <select value={this.state.shelf} onChange={(event) => this.updateShelf(event.target.value)}>\n              <option value=\"move\" disabled>Move to...</option>\n              <option value=\"currentlyReading\">Currently Reading</option>\n              <option value=\"wantToRead\">Want to Read</option>\n              <option value=\"read\">Read</option>\n              <option value=\"none\">None</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"book-title\">{bookData.title}</div>\n        <div className=\"book-authors\">{authors}</div>\n      </div>\n    )\n  }\n}\n\nexport default Book;","import React, { Component } from 'react';\nimport Book from './Book';\n\nclass BookGrid extends Component {\n\n  render() {\n    const {\n      allBooks,\n      shelfBooks,\n      onMoveShelf,\n    } = this.props;\n\n    const bookList = shelfBooks.length > 0 &&\n      shelfBooks.map(bookData => {\n          const matchingBook = allBooks.filter( existingBook => existingBook.id === bookData.id)[0];\n          \n          if(matchingBook) {\n            bookData.shelf = matchingBook.shelf;\n          } else {\n            bookData.shelf = 'none';\n          }\n\n          return (\n            <li key={bookData.id}>\n              <Book bookData={bookData} onMoveShelf={onMoveShelf} />\n            </li>\n          )\n        })\n\n    return (\n      <ol className=\"books-grid\">\n        {bookList}\n      </ol>\n    )\n  }\n}\n\nexport default BookGrid;","import React, { Component } from 'react';\nimport BookGrid from './BookGrid';\n\nclass BookShelf extends Component {\n\n\n  render() {\n    const {\n      allBooks,\n      shelfBooks,\n      shelfTitle,\n      onMoveShelf,\n    } = this.props;\n\n    return (\n      <div className=\"bookshelf\">\n        <h2 className=\"bookshelf-title\">{shelfTitle}</h2>\n        <div className=\"bookshelf-books\">\n          <BookGrid allBooks={allBooks} shelfBooks={shelfBooks} onMoveShelf={onMoveShelf} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default BookShelf;","import React from \"react\";\nimport { Link, Route } from \"react-router-dom\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport BookGrid from \"./BookGrid.js\"\nimport BookShelf from \"./BookShelf.js\";\n\nclass BooksApp extends React.Component {\n\n  state = {\n    books: [],\n    query: '',\n    results: [],\n    queryError: false,\n  };\n\n  componentDidMount() {\n    BooksAPI.getAll().then(booksData => {\n      this.setState(() => ({\n        books: booksData\n      }))\n\n    })\n  }\n\n  handleMoveShelf = (movedBook, newShelf) => {\n    BooksAPI.update(movedBook, newShelf).then(res => {\n      movedBook.shelf = newShelf;\n      this.setState(prevState => ({\n        books: prevState.books\n          .filter(book => book.id !== movedBook.id)\n          .concat(movedBook)\n      }));\n    })\n  }\n\n  updateQuery = (target, query) => {\n    this.setState(() => ({\n      query: query\n    }))\n\n    if (query) {\n      BooksAPI.search(query.trim()).then(results => {\n        results.length > 0\n          ? this.setState(() => ({\n              results: results,\n              queryError: false\n            }))\n          : this.setState(() => ({\n              results: [],\n              queryError: true\n            }))\n      })\n    } else {\n      this.setState(() => ({\n        results: [],\n        queryError: false\n      }))\n    }\n  }\n\n  filterByShelf(booksData, shelfName) {\n    const booksOnShelf = booksData.filter(book => book.shelf === shelfName);\n    return booksOnShelf;\n  }\n\n\n\n  render() {\n    const { books, query, results, queryError } = this.state;\n    const currentlyReading = this.filterByShelf(books, 'currentlyReading');\n    const wantToRead = this.filterByShelf(books, 'wantToRead');\n    const read = this.filterByShelf(books, 'read');\n    \n    return (\n      <div className=\"app\">\n\n        {/* Main view */}\n        <Route exact path={\"/\"} render={() => (\n          <div className=\"list-books\">\n            <header className=\"list-books-title\">\n              <h1>MyReads</h1>\n            </header>\n            <div className=\"list-books-content\">\n              <div>\n                <BookShelf\n                  allBooks={books}\n                  shelfBooks={currentlyReading}\n                  shelfTitle=\"Currently Reading\"\n                  onMoveShelf={this.handleMoveShelf}\n                />\n                <BookShelf\n                  allBooks={books}\n                  shelfBooks={wantToRead}\n                  shelfTitle=\"Want to Read\"\n                  onMoveShelf={this.handleMoveShelf}\n                />\n                <BookShelf\n                  allBooks={books}\n                  shelfBooks={read}\n                  shelfTitle=\"Read\"\n                  onMoveShelf={this.handleMoveShelf}\n                />\n              </div>\n            </div>\n            <Link to='/search' className=\"open-search\">\n              <button>\n                Add a book\n              </button>\n            </Link>\n          </div>\n        )} />\n\n        {/* Search view */}\n        <Route path={\"/search\"} render={() => (\n          <div className=\"search-books\">\n            <div className=\"search-books-bar\">\n              <Link to='/' className=\"close-search\">\n                Close\n              </Link>\n              <div className=\"search-books-input-wrapper\">\n                <input\n                  name=\"search\"\n                  type=\"text\"\n                  placeholder=\"Search by title or author\"\n                  value={query}\n                  onChange={(e) => {\n                    e.preventDefault();\n                    this.updateQuery(e.target, e.target.value)\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"search-books-results\">\n              {results.length > 0 && (\n                <BookGrid\n                  allBooks={books}\n                  shelfBooks={results}\n                  onMoveShelf={this.handleMoveShelf} \n                />\n              )}\n              {queryError && (\n                <p>Sorry, no books including {`\"${query}\"`} were found.</p>\n              )}\n            </div>\n          </div>\n        )} />\n      </div>\n    );\n  }\n}\n\nexport default BooksApp;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}